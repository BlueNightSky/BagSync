<Ui xmlns="http://www.blizzard.com/wow/ui/"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.blizzard.com/wow/ui/..\FrameXML\UI.xsd">

    <Frame name="BagSyncListItemTemplate" virtual="true">
        <Size x="0" y="22"/>
        <Layers>
            <Layer level="BACKGROUND">
                <Texture parentKey="Background" setAllPoints="true">
                    <Color r="0" g="0" b="0" a="0"/>
                </Texture>
            </Layer>
            <Layer level="ARTWORK">
                <Texture parentKey="Icon">
                    <Size x="18" y="18"/>
                    <Anchors>
                        <Anchor point="LEFT" x="0" y="0"/>
                    </Anchors>
                </Texture>
                <FontString parentKey="Text" inherits="GameFontNormal" justifyH="LEFT">
                    <Anchors>
                        <Anchor point="LEFT" relativeKey="$parent.Icon" relativePoint="RIGHT" x="8" y="0"/>
                        <Anchor point="RIGHT" relativeKey="$parent.DetailsButton" x="-8" y="0"/>
                    </Anchors>
                </FontString>
            </Layer>
            <Layer level="OVERLAY">
                <Texture parentKey="HeaderHighlight" setAllPoints="true" alphaMode="ADD" file="Interface\QuestFrame\UI-QuestTitleHighlight" alpha="0">
                    <Color r="0.8" g="0.7" b="0" a="1"/>
                </Texture>
                <Texture parentKey="DetailsHighlight" setAllPoints="true" alphaMode="ADD" file="Interface\Tooltips\UI-Tooltip-Background" alpha="0">
                    <Color r="0.4" g="0.2" b="0.5" a="0.2"/>
                </Texture>
            </Layer>
            <Layer level="HIGHLIGHT">
                <Texture parentKey="Highlight" setAllPoints="true" alphaMode="ADD">
                    <Color r="0" g="1" b="0" a="0.2"/>
                </Texture>
            </Layer>
        </Layers>
        <Frames>
            <Button parentKey="DetailsButton">
                <Size x="16" y="16"/>
                <Anchors>
                    <Anchor point="RIGHT" x="-4" y="0"/>
                </Anchors>
                <NormalTexture setAllPoints="true" atlas="shop-games-magnifyingglass"/>
                <HighlightTexture setAllPoints="true" atlas="shop-games-magnifyingglass" alphaMode="ADD"/>
                <Scripts>
                    <OnClick>
						if self:GetParent().parentHandler and self:GetParent().parentHandler.ItemDetails then
							self:GetParent().parentHandler:ItemDetails(self);
						end
                    </OnClick>
					<OnEnter>
						self:GetParent().DetailsHighlight:SetAlpha(0.75);
					</OnEnter>
					<OnLeave>
						self:GetParent().DetailsHighlight:SetAlpha(0);
					</OnLeave>
                </Scripts>
            </Button>
        </Frames>
		<Scripts>
			<OnClick>
				<!-- self:<scrollframe><parentObject> -->
				if self.parentHandler and self.parentHandler.Item_OnClick then
					self.parentHandler:Item_OnClick(self);
				end
			</OnClick>
			<OnEnter>
				if self.isHeader and self.Highlight:IsVisible() then self.Highlight:Hide() end;
				if self.parentHandler and self.parentHandler.Item_OnEnter then
					self.parentHandler:Item_OnEnter(self);
				end
			</OnEnter>
			<OnLeave>
				if not self.isHeader and not self.Highlight:IsVisible() then self.Highlight:Show() end;
				if self.parentHandler and self.parentHandler.Item_OnLeave then
					self.parentHandler:Item_OnLeave(self);
				end
			</OnLeave>
		</Scripts>
    </Frame>

	<Frame name="BagSyncListSimpleItemTemplate" virtual="true">
        <Size x="0" y="22"/>
        <Layers>
            <Layer level="BACKGROUND">
                <Texture parentKey="Background" setAllPoints="true">
                    <Color r="0" g="0" b="0" a="0"/>
                </Texture>
            </Layer>
            <Layer level="ARTWORK">
                <FontString parentKey="Text" inherits="GameFontNormal" justifyH="LEFT">
                    <Anchors>
                        <Anchor point="LEFT" x="8" y="0"/>
						<Anchor point="RIGHT" relativeKey="$parent" x="-8" y="0"/>
                    </Anchors>
                </FontString>
                <FontString parentKey="Text2" inherits="GameFontNormal" justifyH="RIGHT">
                    <Anchors>
                        <Anchor point="RIGHT" x="-10" y="0"/>
						<Anchor point="LEFT" relativeKey="$parent" x="-8" y="0"/>
                    </Anchors>
                </FontString>
            </Layer>
            <Layer level="OVERLAY">
                <Texture parentKey="HeaderHighlight" setAllPoints="true" alphaMode="ADD" file="Interface\QuestFrame\UI-QuestTitleHighlight" alpha="0">
                    <Color r="0.8" g="0.7" b="0" a="1"/>
                </Texture>
                <Texture parentKey="DetailsHighlight" setAllPoints="true" alphaMode="ADD" file="Interface\Tooltips\UI-Tooltip-Background" alpha="0">
                    <Color r="0.4" g="0.2" b="0.5" a="0.2"/>
                </Texture>
            </Layer>
            <Layer level="HIGHLIGHT">
                <Texture parentKey="Highlight" setAllPoints="true" alphaMode="ADD">
                    <Color r="0" g="1" b="0" a="0.2"/>
                </Texture>
            </Layer>
        </Layers>
		<Scripts>
			<OnClick>
				<!-- self:<scrollframe><parentObject> -->
				if self.parentHandler and self.parentHandler.Item_OnClick then
					self.parentHandler:Item_OnClick(self);
				end
			</OnClick>
			<OnEnter>
				if self.isHeader and self.Highlight:IsVisible() then self.Highlight:Hide() end;
				if self.parentHandler and self.parentHandler.Item_OnEnter then
					self.parentHandler:Item_OnEnter(self);
				end
			</OnEnter>
			<OnLeave>
				if not self.isHeader and not self.Highlight:IsVisible() then self.Highlight:Show() end;
				if self.parentHandler and self.parentHandler.Item_OnLeave then
					self.parentHandler:Item_OnLeave(self);
				end
			</OnLeave>
		</Scripts>
    </Frame>


<!--
*******************************************************************************
    Modified version of Blizzard's BagSyncSearchFrameTemplate
    BagSyncBagSyncSearchFrameTemplate
	This is an empty frame with a titlebar and a close button.
	It also contains a Searbox with Search buttons.
*******************************************************************************
-->
	<Frame name="BaseBagSyncSearchFrameTemplate" virtual="true">
		<Layers>
			<Layer level="OVERLAY">
				<Texture parentKey="TopLeftCorner" inherits="UI-Frame-TopLeftCorner">
					<Anchors>
						<Anchor point="TOPLEFT" x="-6" y="1"/>
					</Anchors>
				</Texture>
				<Texture parentKey="TopRightCorner" inherits="UI-Frame-TopCornerRight">
					<Anchors>
						<Anchor point="TOPRIGHT" x="0" y="1"/>
					</Anchors>
				</Texture>
				<Texture parentKey="TopBorder" inherits="_UI-Frame-TitleTile">
					<Anchors>
						<Anchor point="TOPLEFT" relativeKey="$parent.TopLeftCorner" relativePoint="TOPRIGHT"/>
						<Anchor point="TOPRIGHT" relativeKey="$parent.TopRightCorner" relativePoint="TOPLEFT"/>
					</Anchors>
				</Texture>
				<FontString parentKey="TitleText" inherits="GameFontNormal" text="">
					<Anchors>
						<Anchor point="TOP" x="-6" y="-4" />
					</Anchors>
				</FontString>
			</Layer>
			<Layer level="BORDER">
				<Texture parentKey="BotLeftCorner" inherits="UI-Frame-BotCornerLeft">
					<Anchors>
						<Anchor point="BOTTOMLEFT" x="-6" y="-5"/>
					</Anchors>
				</Texture>
				<Texture parentKey="BotRightCorner" inherits="UI-Frame-BotCornerRight">
					<Anchors>
						<Anchor point="BOTTOMRIGHT" x="0" y="-5"/>
					</Anchors>
				</Texture>
				<Texture parentKey="BottomBorder" inherits="_UI-Frame-Bot">
					<Anchors>
						<Anchor point="BOTTOMLEFT" relativeKey="$parent.BotLeftCorner" relativePoint="BOTTOMRIGHT" y="0"/>
						<Anchor point="BOTTOMRIGHT" relativeKey="$parent.BotRightCorner" relativePoint="BOTTOMLEFT" y="0"/>
					</Anchors>
				</Texture>
				<Texture parentKey="LeftBorder" inherits="!UI-Frame-LeftTile">
					<Anchors>
						<Anchor point="TOPLEFT" relativeKey="$parent.TopLeftCorner" relativePoint="BOTTOMLEFT"/>
						<Anchor point="BOTTOMLEFT" relativeKey="$parent.BotLeftCorner" relativePoint="TOPLEFT"/>
					</Anchors>
				</Texture>
				<Texture parentKey="RightBorder" inherits="!UI-Frame-RightTile">
					<Anchors>
						<Anchor point="TOPRIGHT" relativeKey="$parent.TopRightCorner" relativePoint="BOTTOMRIGHT" x="1"/>
						<Anchor point="BOTTOMRIGHT" relativeKey="$parent.BotRightCorner" relativePoint="TOPRIGHT"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
		<Frames>
			<Button parentKey="CloseButton" inherits="UIPanelCloseButtonDefaultAnchors"/>
			<EditBox parentKey="SearchBox" enableMouse="true" autoFocus="false" inherits="InputBoxTemplate">
				<Size x="0" y="24"/>
				<TextInsets>
					<AbsInset left="24" right="19" top="1" bottom="-1"/> <!-- Move the Input cursor to the right beyond Search Icon -->
				</TextInsets>
				<Anchors>
					<!-- This is important as it sets the size of the SearchBox to dimentions it can fit on the frame-->
					<Anchor point="TOPLEFT" relativeKey="$parent" relativePoint="TOPRIGHT" x="-112" y="-28"/>
					<Anchor point="RIGHT" relativeKey="$parent" relativePoint="LEFT" x="13" y="0"/>
				</Anchors>
				<Layers>
					<Layer level="ARTWORK">
						<Texture parentKey="SearchIcon" file="Interface\Common\UI-Searchbox-Icon">
							<Size x="18" y="18"/>
							<Anchors>
								<Anchor point="LEFT" x="6" y="-2"/>
							</Anchors>
							<Color r="0.6" g="0.6" b="0.6"/>
						</Texture>
						<!-- Lets add a default flavor text in the search box to be informative -->
						<FontString parentKey="SearchInfo" inherits="GameFontDisable" text="SEARCH">
							<Anchors>
								<Anchor point="LEFT" x="24" y="0"/>
							</Anchors>
							<Color r="0.35" g="0.35" b="0.35"/>
						</FontString>
					</Layer>
				</Layers>
				<Frames>
					<Button parentKey="ClearButton" hidden="true">
						<Size x="18" y="18"/>
						<Anchors>
							<Anchor point="RIGHT" x="-3" y="0"/>
						</Anchors>
						<HitRectInsets>
							<AbsInset left="-2" right="-2" top="-2" bottom="-2"/>
						</HitRectInsets>
						<Layers>
							<Layer level="ARTWORK">
								<Texture parentKey="Texture" file="Interface\FriendsFrame\ClearBroadcastIcon" alpha="0.5">
									<Size x="18" y="18"/>
									<Anchors>
										<Anchor point="TOPLEFT"/>
									</Anchors>
								</Texture>
							</Layer>
						</Layers>
						<Scripts>
							<OnEnter>
								self.Texture:SetAlpha(1.0);
							</OnEnter>
							<OnLeave>
								self.Texture:SetAlpha(0.5)
							</OnLeave>
							<OnMouseDown>
								self.Texture:SetPoint("TOPLEFT",-1,-2)
							</OnMouseDown>
							<OnMouseUp>
								self.Texture:SetPoint("TOPLEFT",0,0)
							</OnMouseUp>
							<OnShow>
								self.Texture:SetPoint("TOPLEFT",0,0)
							</OnShow>
							<OnClick>
								if self:GetParent():GetParent().SearchBox_ResetSearch then
									self:GetParent():GetParent():SearchBox_ResetSearch(self);
								end
							</OnClick>
						</Scripts>
					</Button>
				</Frames>
				<FontString inherits="GameFontHighlight"/>
				<Scripts>
					<OnEscapePressed>
						self:ClearFocus()
						if self:GetParent().SearchBox_OnEscapePressed then
							self:GetParent():SearchBox_OnEscapePressed(self:GetText());
						end
					</OnEscapePressed>
					<OnEnterPressed>
						self:ClearFocus()
						if self:GetParent().SearchBox_OnEnterPressed then
							self:GetParent():SearchBox_OnEnterPressed(self:GetText());
						end
					</OnEnterPressed>
					<OnEditFocusLost>
						self.SearchIcon:SetVertexColor(0.6,0.6,0.6)
						self.SearchInfo:SetShown(self:GetText():len()==0)
						self.ClearButton:SetShown(self:GetText():len()>0)
					</OnEditFocusLost>
					<OnEditFocusGained>
						self.SearchIcon:SetVertexColor(1.0,1.0,1.0)
						self.ClearButton:Show()
						self.SearchInfo:Hide()
					</OnEditFocusGained>
					<OnTextChanged>
						if self:GetParent().SearchBox_OnTextChanged then
							self:GetParent():SearchBox_OnTextChanged(userInput);
						end
					</OnTextChanged>
				</Scripts>
			</EditBox>
            <Button parentKey="RefreshButton" inherits="UIPanelButtonTemplate" text="REFRESH">
                <Size x="80" y="20"/>
                <Anchors>
                    <Anchor point="TOPRIGHT" x="-28" y="-30"/>
                </Anchors>
                <Scripts>
                    <OnClick>
						if self:GetParent().RefreshClick then
							self:GetParent():RefreshClick();
						end
                    </OnClick>
                </Scripts>
            </Button>
            <Button parentKey="HelpButton" inherits="UIPanelButtonTemplate" text="?">
                <Size x="20" y="20"/>
                <Anchors>
                    <Anchor point="TOPRIGHT" x="-8" y="-30"/>
                </Anchors>
                <Scripts>
                    <OnClick>
						if self:GetParent().HelpClick then
							self:GetParent():HelpClick();
						end
                    </OnClick>
                </Scripts>
            </Button>
		</Frames>
		<Scripts>
			<OnMouseDown>
				if ( button == "LeftButton" ) then
					self:StartMoving();
					self.isMoving = true;
				end
			</OnMouseDown>
			<OnMouseUp>
				if ( self.isMoving ) then
					self:StopMovingOrSizing();
					self.isMoving = false;
				end
			</OnMouseUp>
		</Scripts>
	</Frame>

	<Frame name="BagSyncSearchFrameTemplate" inherits="BaseBagSyncSearchFrameTemplate" virtual="true">
		<Layers>
			<Layer level="BACKGROUND" textureSubLevel="-1">
				<Texture parentKey="Bg" file="Interface\Tooltips\UI-Tooltip-Background" horizTile="true" vertTile="true">
					<Anchors>
						<Anchor point="TOPLEFT" x="2" y="-21"/>
						<Anchor point="BOTTOMRIGHT" x="-2" y="2"/>
					</Anchors>
                    <Color r="0" g="0" b="0" a=".75"/>
				</Texture>
				<Texture parentKey="TitleBg" inherits="_UI-Frame-TitleTileBg">
					<Anchors>
						<Anchor point="TOPLEFT" x="2" y="-1"/>
						<Anchor point="TOPRIGHT" x="-25" y="-1"/>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="BACKGROUND">
				<Texture parentKey="TopTileStreaks" inherits="_UI-Frame-TopTileStreaks">
					<Anchors>
						<Anchor point="TOPLEFT" x="0" y="-21"/>
						<Anchor point="TOPRIGHT" x="-2" y="-21"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
	</Frame>

<!--
*******************************************************************************
    Modified version of Blizzard's BagSyncFrameTemplate
    BagSyncBagSyncFrameTemplate
	This is an empty frame with a titlebar and a close button.
*******************************************************************************
-->
	<Frame name="BaseBagSyncFrameTemplate" virtual="true">
		<Layers>
			<Layer level="OVERLAY">
				<Texture parentKey="TopLeftCorner" inherits="UI-Frame-TopLeftCorner">
					<Anchors>
						<Anchor point="TOPLEFT" x="-6" y="1"/>
					</Anchors>
				</Texture>
				<Texture parentKey="TopRightCorner" inherits="UI-Frame-TopCornerRight">
					<Anchors>
						<Anchor point="TOPRIGHT" x="0" y="1"/>
					</Anchors>
				</Texture>
				<Texture parentKey="TopBorder" inherits="_UI-Frame-TitleTile">
					<Anchors>
						<Anchor point="TOPLEFT" relativeKey="$parent.TopLeftCorner" relativePoint="TOPRIGHT"/>
						<Anchor point="TOPRIGHT" relativeKey="$parent.TopRightCorner" relativePoint="TOPLEFT"/>
					</Anchors>
				</Texture>
				<FontString parentKey="TitleText" inherits="GameFontNormal" text="">
					<Anchors>
						<Anchor point="TOP" x="-6" y="-4" />
					</Anchors>
				</FontString>
			</Layer>
			<Layer level="BORDER">
				<Texture parentKey="BotLeftCorner" inherits="UI-Frame-BotCornerLeft">
					<Anchors>
						<Anchor point="BOTTOMLEFT" x="-6" y="-5"/>
					</Anchors>
				</Texture>
				<Texture parentKey="BotRightCorner" inherits="UI-Frame-BotCornerRight">
					<Anchors>
						<Anchor point="BOTTOMRIGHT" x="0" y="-5"/>
					</Anchors>
				</Texture>
				<Texture parentKey="BottomBorder" inherits="_UI-Frame-Bot">
					<Anchors>
						<Anchor point="BOTTOMLEFT" relativeKey="$parent.BotLeftCorner" relativePoint="BOTTOMRIGHT" y="0"/>
						<Anchor point="BOTTOMRIGHT" relativeKey="$parent.BotRightCorner" relativePoint="BOTTOMLEFT" y="0"/>
					</Anchors>
				</Texture>
				<Texture parentKey="LeftBorder" inherits="!UI-Frame-LeftTile">
					<Anchors>
						<Anchor point="TOPLEFT" relativeKey="$parent.TopLeftCorner" relativePoint="BOTTOMLEFT"/>
						<Anchor point="BOTTOMLEFT" relativeKey="$parent.BotLeftCorner" relativePoint="TOPLEFT"/>
					</Anchors>
				</Texture>
				<Texture parentKey="RightBorder" inherits="!UI-Frame-RightTile">
					<Anchors>
						<Anchor point="TOPRIGHT" relativeKey="$parent.TopRightCorner" relativePoint="BOTTOMRIGHT" x="1"/>
						<Anchor point="BOTTOMRIGHT" relativeKey="$parent.BotRightCorner" relativePoint="TOPRIGHT"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
		<Frames>
			<Button parentKey="CloseButton" inherits="UIPanelCloseButtonDefaultAnchors"/>
		</Frames>
		<Scripts>
			<OnMouseDown>
				if ( button == "LeftButton" ) then
					self:StartMoving();
					self.isMoving = true;
				end
			</OnMouseDown>
			<OnMouseUp>
				if ( self.isMoving ) then
					self:StopMovingOrSizing();
					self.isMoving = false;
				end
			</OnMouseUp>
		</Scripts>
	</Frame>

	<Frame name="BagSyncFrameTemplate" inherits="BaseBagSyncFrameTemplate" virtual="true">
		<Layers>
			<Layer level="BACKGROUND" textureSubLevel="-1">
				<Texture parentKey="Bg" file="Interface\Tooltips\UI-Tooltip-Background" horizTile="true" vertTile="true">
					<Anchors>
						<Anchor point="TOPLEFT" x="2" y="-21"/>
						<Anchor point="BOTTOMRIGHT" x="-2" y="2"/>
					</Anchors>
                    <Color r="0" g="0" b="0" a=".75"/>
				</Texture>
				<Texture parentKey="TitleBg" inherits="_UI-Frame-TitleTileBg">
					<Anchors>
						<Anchor point="TOPLEFT" x="2" y="-1"/>
						<Anchor point="TOPRIGHT" x="-25" y="-1"/>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="BACKGROUND">
				<Texture parentKey="TopTileStreaks" inherits="_UI-Frame-TopTileStreaks">
					<Anchors>
						<Anchor point="TOPLEFT" x="0" y="-21"/>
						<Anchor point="TOPRIGHT" x="-2" y="-21"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
	</Frame>

<!--
*******************************************************************************
    BagSync Info Tooltip Window Frame Template
*******************************************************************************
-->
	<Frame name="BagSyncInfoFrameTemplate" inherits="TooltipBackdropTemplate" virtual="true">
		<Size x="300" y="300"/>
		<Anchors>
			<Anchor point="BOTTOM" x="0" y="0"/>
		</Anchors>
		<Layers>
			<Layer level="OVERLAY">
				<FontString parentKey="TitleText" inherits="GameFontNormal" text="">
					<Anchors>
						<Anchor point="TOP" x="-6" y="-4" />
					</Anchors>
				</FontString>
				<FontString parentKey="InfoText1" inherits="GameFontNormal" text="">
                    <Anchors>
                        <Anchor point="LEFT" relativeKey="$parent" relativePoint="TOPLEFT" x="10" y="-40"/>
                    </Anchors>
				</FontString>
				<FontString parentKey="InfoText2" inherits="GameFontNormal" text="">
                    <Anchors>
                        <Anchor point="LEFT" relativeKey="$parent" relativePoint="TOPLEFT" x="10" y="-50"/>
                    </Anchors>
				</FontString>
			</Layer>
		</Layers>
		<Frames>
			<Button parentKey="CloseButton">
				<Size x="32" y="32"/>
				<Anchors>
					<Anchor point="TOPRIGHT" x="1" y="0"/>
				</Anchors>
				<Scripts>
					<OnClick>
						self:GetParent():Hide();
					</OnClick>
				</Scripts>
				<NormalTexture file="Interface\Buttons\UI-Panel-MinimizeButton-Up"/>
				<PushedTexture file="Interface\Buttons\UI-Panel-MinimizeButton-Down"/>
				<HighlightTexture file="Interface\Buttons\UI-Panel-MinimizeButton-Highlight" alphaMode="ADD"/>
			</Button>
		</Frames>
	</Frame>

</Ui>